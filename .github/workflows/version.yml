name: Planner

on:
  workflow_dispatch:
    inputs:
      force_rebuild:
        description: 'Force Rebuild'
        required: false
        default: false
        type: boolean
  push:
    branches: [ "master" ]
    paths:
      - '**/cmake-**.yml'
      - '**/cmake/**.json'
  schedule:
    - cron: '0 0 * * 0' # “At 00:00 on every Sunday”

jobs:
  params:
    runs-on: ubuntu-latest
    defaults:
      run:
        shell: bash
    steps:
    - name: Checkout Codebase
      uses: actions/checkout@v3

    - name: Validate JSON
      id: validation
      uses: kiran-godse/Nodejs-Rainfall@main
      with:
       json-file: recipe/cmake/recipe.json
       schema-file: .schema/recipe.json

    - name: Extract JSON Content
      id: extract_content
      run: |
        json_content=$(cat ./recipe/cmake/recipe.json)
        echo "JSON Content:$json_content"
    - name: Test Outputs
      run: |
              echo "Substrate Tag: ${{ env.substrate_tag }}"
              echo "Substrate Name: ${{ env.substrate_name }}"
              echo "Substrate Registry: ${{ env.substrate_registry }}"
              echo "Substrate Auth: ${{ env.substrate_auth }}"
