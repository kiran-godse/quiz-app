name: Get Substrate Version Workflow
on:
  push:
    branches:
      - main

jobs:
  get_version:
    runs-on: ubuntu-latest
    steps:
      - name: Checkout repository
        uses: actions/checkout@v2

      - name: Get Substrate Version
        id: substrate_version
        uses: kiran-godse/ImageTrial@v1
        with:
          substrate_json: '{"registry": "github","name": "rainfall-one/crucible","tag": "latest","needs_auth": true}'
      
      - name: Print Substrate Version
        run: echo "The version of Substrate is ${{ steps.substrate_version.outputs.version }}"
